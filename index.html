<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GURU VIP ‚Äî Pay via UPI (Scanner built-in)</title>
  <meta name="description" content="Pay using any UPI app ‚Äî PhonePe / Paytm / GPay / BHIM" />
  <style>
    :root{--accent1:#ff416c;--accent2:#ffed00;--bg:#081226;--card:#fff}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#07253a);color:#fff;padding:18px}
    .wrap{max-width:980px;margin:0 auto}
    header{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),#ff8a00);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:22px;color:#fff}
    h1{margin:0;font-size:20px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));border-radius:12px;padding:16px;box-shadow:0 12px 36px rgba(0,0,0,.6)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:16px;align-items:start}
    .plans{display:grid;gap:10px}
    .plan{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.03)}
    .price{font-weight:800}
    .btn{background:linear-gradient(90deg,#6a11cb,#2575fc);color:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer}
    .qr-box{background:#fff;padding:12px;border-radius:10px;color:#111;text-align:center}
    .qr-box img{max-width:100%;height:auto;border-radius:8px}
    .upi-line{margin-top:10px;font-weight:800;color:#06102a}
    .muted{font-size:13px;color:rgba(255,255,255,0.8)}
    footer{margin-top:18px;color:rgba(255,255,255,0.75);font-size:13px;text-align:center}
    /* modal */
    #scannerModalBg{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:none;justify-content:center;align-items:center;z-index:200}
    .modal{background:#fff;color:#111;border-radius:12px;padding:14px;max-width:760px;width:94%;max-height:90vh;overflow:auto}
    .modal h3{margin:0 0 8px 0}
    .modal .qr-flex{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .qr-card{background:#f7fafc;padding:10px;border-radius:10px;text-align:center;min-width:200px}
    .qr-card img{max-width:180px;border-radius:8px}
    .modal .actions{display:flex;gap:8px;justify-content:center;margin-top:12px}
    .close-btn{background:#eee;border:0;padding:8px 10px;border-radius:8px;cursor:pointer}
    /* scanner area */
    #reader{width:320px;max-width:100%;margin:8px auto;border-radius:8px;overflow:hidden}
    @media(max-width:800px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">G</div>
      <div>
        <h1>GURU VIP PREBOOKING 4.1</h1>
        <div class="muted">Prime Membership ‚Äî Pay using any UPI app or scan below</div>
      </div>
    </header>

    <div class="card">
      <div class="grid">
        <!-- LEFT: Plans -->
        <div>
          <h2 style="margin-top:0">üî• Plans</h2>
          <div class="plans">
            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">1 Day</div></div><div style="text-align:right"><div class="price">‚Çπ99</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (1DAY)','99')">Pay ‚Çπ99</button></div></div></div>

            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">3 Day</div></div><div style="text-align:right"><div class="price">‚Çπ199</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (3DAY)','199')">Pay ‚Çπ199</button></div></div></div>

            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">7 Day</div></div><div style="text-align:right"><div class="price">‚Çπ399</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (7DAY)','399')">Pay ‚Çπ399</button></div></div></div>

            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">1 Month</div></div><div style="text-align:right"><div class="price">‚Çπ699</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (1MONTH)','699')">Pay ‚Çπ699</button></div></div></div>

            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">Full Season</div></div><div style="text-align:right"><div class="price">‚Çπ999</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (FULL SEASON)','999')">Pay ‚Çπ999</button></div></div></div>

            <div class="plan"><div><strong>PRIME Esp + Loader</strong><div class="muted">Lifetime</div></div><div style="text-align:right"><div class="price">‚Çπ2999</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME Esp + Loader (LIFETIME)','2999')">Pay ‚Çπ2999</button></div></div></div>

            <div class="plan"><div><strong>PRIME OBB</strong><div class="muted">Full Season</div></div><div style="text-align:right"><div class="price">‚Çπ299</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME OBB (FULL SEASON)','299')">Pay ‚Çπ299</button></div></div></div>

            <div class="plan"><div><strong>PRIME WALL HACK</strong><div class="muted">Full Season</div></div><div style="text-align:right"><div class="price">‚Çπ499</div><div style="margin-top:6px"><button class="btn" onclick="startPayment('PRIME WALL HACK (FULL SEASON)','499')">Pay ‚Çπ499</button></div></div></div>

          </div>
        </div>

        <!-- RIGHT: QR & actions -->
        <div class="center">
          <div class="qr-box">
            <a id="upiPhoneLink" href="#" onclick="return tryOpenUPI(event)">
              <img src="AccountQRCodeIndian Bank - 7279_LIGHT_THEME.png" alt="PhonePe QR">
            </a>
            <div class="upi-line">UPI ID: <span id="showUpi">rajeshkumar78694@axl</span></div>

            <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
              <button class="btn" onclick="copyUpi()">Copy UPI</button>
              <button class="btn" onclick="openScannerModal()">Open Scanner</button>
            </div>

            <hr style="margin:12px 0;border:none;border-top:1px solid rgba(0,0,0,0.06)">

            <div style="text-align:left;color:#333;background:#fff;padding:10px;border-radius:8px;margin-top:8px;font-size:14px">
              <strong>Paytm QR (backup):</strong><br>
              <img style="max-width:100%;margin-top:8px;border-radius:8px" src="Paytm_QRcode_1761710176230.png" alt="Paytm QR">
            </div>

            <div style="margin-top:10px" class="muted center">‡§™‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ TXN screenshot ‡§≠‡•á‡§ú‡•á‡§Ç: <br><a href="https://t.me/+ZP4KvBpRkpQxMDVl" target="_blank">https://t.me/+ZP4KvBpRkpQxMDVl</a></div>
          </div>
        </div>
      </div>
    </div>

    <footer>Share link with buyers ‚Ä¢ Telegram: <a href="https://t.me/+ZP4KvBpRkpQxMDVl" style="color:#fff;text-decoration:underline">Join Channel</a></footer>
  </div>

  <!-- Scanner + QR modal -->
  <div id="scannerModalBg">
    <div class="modal">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3>Scan QR / Camera Scanner</h3>
          <div class="muted">Allow camera permission to scan ‚Äî ‡§Ø‡§æ ‡§®‡•Ä‡§ö‡•á QR ‡§ï‡•ã scan ‡§ï‡§∞‡•á‡§Ç</div>
        </div>
        <div><button class="close-btn" onclick="closeScannerModal()">Close</button></div>
      </div>

      <div style="margin-top:10px;display:flex;gap:12px;flex-wrap:wrap;justify-content:center;align-items:flex-start">
        <div style="min-width:260px">
          <div id="reader"></div>
        </div>

        <div style="min-width:220px">
          <div style="background:#fff;padding:8px;border-radius:8px;text-align:center">
            <div style="font-weight:800;margin-bottom:8px">PhonePe QR</div>
            <img src="AccountQRCodeIndian Bank - 7279_LIGHT_THEME.png" alt="PhonePe QR" style="max-width:180px;border-radius:8px">
            <div class="muted" style="margin-top:8px">UPI: <b>rajeshkumar78694@axl</b></div>
          </div>

          <div style="background:#fff;padding:8px;border-radius:8px;text-align:center;margin-top:10px">
            <div style="font-weight:800;margin-bottom:8px">Paytm QR (Backup)</div>
            <img src="Paytm_QRcode_1761710176230.png" alt="Paytm QR" style="max-width:180px;border-radius:8px">
            <div class="muted" style="margin-top:8px">UPI: <b>rajeshkumar78694@axl</b></div>
          </div>

          <div style="margin-top:12px;text-align:center">
            <a class="btn" href="https://t.me/+ZP4KvBpRkpQxMDVl" target="_blank">Join Telegram Channel</a>
          </div>
        </div>
      </div>

      <p style="font-size:13px;color:#666;margin-top:12px;text-align:center">
        ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ result ‡§Ü‡§è‡§ó‡§æ ‚Äî result ‡§Æ‡•á‡§Ç ‡§Ö‡§ó‡§∞ ‡§ï‡•ã‡§à UPI link ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã ‡§µ‡§π copy/paste ‡§ï‡§∞‡§ï‡•á open ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
      </p>
    </div>
  </div>

  <!-- html5-qrcode -->
  <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>

  <script>
    // CONFIG
    const CONFIG = {
      upi: "rajeshkumar78694@axl",
      name: "Rajesh Kumar Kahar",
      telegram: "https://t.me/+ZP4KvBpRkpQxMDVl"
    };

    // build UPI uri
    function buildUpiUri(amount, note){
      const pa = encodeURIComponent(CONFIG.upi);
      const pn = encodeURIComponent(CONFIG.name);
      const tn = encodeURIComponent(note || "Payment to Guru");
      const cu = "INR";
      let uri = `upi://pay?pa=${pa}&pn=${pn}&tn=${tn}&cu=${cu}&mode=02`;
      if(amount) uri += `&am=${encodeURIComponent(amount)}`;
      return uri;
    }

    // try to open UPI (app)
    function openUpiUri(uri){
      try { window.location.href = uri; } catch(e){ window.open(uri, '_self'); }
      setTimeout(()=> {
        alert('‡§Ø‡§¶‡§ø UPI ‡§ê‡§™ ‡§®‡§π‡•Ä‡§Ç ‡§ñ‡•Å‡§≤‡§æ, ‡§§‡•ã QR ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ UPI ID ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á ‡§™‡•á ‡§ï‡§∞‡•á‡§Ç: ' + CONFIG.upi);
        openScannerModal(); // fallback: open scanner automatically
      }, 900);
    }

    // called when clicking Pay
    function startPayment(item, amount){
      document.getElementById('showUpi').innerText = CONFIG.upi;
      const upiUri = buildUpiUri(amount, item);
      document.getElementById('upiPhoneLink').href = upiUri;
      // try open app
      openUpiUri(upiUri);
      // show scanner modal immediately so user can scan if app didn't open
      openScannerModal();
    }

    // scanner modal controls
    const modalBg = document.getElementById('scannerModalBg');
    let html5QrCode = null;
    function openScannerModal(){
      modalBg.style.display = 'flex';
      startCameraScanner();
    }
    function closeScannerModal(){
      modalBg.style.display = 'none';
      stopCameraScanner();
    }

    // start html5-qrcode camera
    function startCameraScanner(){
      if(typeof Html5Qrcode === 'undefined') return;
      if(html5QrCode) return; // already running
      html5QrCode = new Html5Qrcode("reader");
      const config = { fps: 10, qrbox: 250 };
      Html5Qrcode.getCameras().then(cameras=>{
        if(cameras && cameras.length){
          const cameraId = cameras[0].id;
          html5QrCode.start(cameraId, config, qrSuccess, qrFailure).catch(err=>{
            console.warn("Scanner start failed:", err);
            // show images fallback (they are visible)
          });
        } else {
          console.warn("No cameras found");
        }
      }).catch(err=>{
        console.warn("getCameras failed:", err);
      });
    }

    function stopCameraScanner(){
      if(!html5QrCode) return;
      html5QrCode.stop().then(()=>{
        html5QrCode.clear();
        html5QrCode = null;
      }).catch(err=>{
        console.warn("stop failed", err);
        html5QrCode = null;
      });
    }

    function qrSuccess(decodedText, decodedResult){
      // decodedText may be a UPI URI or any text
      // show it to user and offer to open if it's upi uri
      alert("Scanned: " + decodedText);
      if(decodedText.startsWith("upi://") || decodedText.includes("@")){
        // try open UPI link or copy
        const openNow = confirm("UPI detected. Open in app?");
        if(openNow){
          // if decodedText is plain vpa like 'abc@bank', build uri:
          let uri = decodedText.startsWith("upi://") ? decodedText : buildUpiUri(null, "Scanned Payment").replace(encodeURIComponent(CONFIG.upi), encodeURIComponent(decodedText));
          // try open
          try { window.location.href = uri; } catch(e){ window.open(uri, '_self'); }
        }
      }
      // stop scanner after successful scan to avoid repeated alerts
      stopCameraScanner();
      closeScannerModal();
    }

    function qrFailure(error){
      // ignore minor failures
    }

    function tryOpenUPI(e){
      e.preventDefault();
      const href = e.currentTarget.href || buildUpiUri(null, "Payment");
      openUpiUri(href);
      return false;
    }

    function copyUpi(){
      navigator.clipboard.writeText(CONFIG.upi).then(()=>{
        alert('UPI ID ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ: ' + CONFIG.upi);
      }).catch(()=>{
        prompt('Copy UPI ID manually:', CONFIG.upi);
      });
    }

    function openInstructions(){
      alert('‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•á:\n\n1) ‡§Ö‡§™‡§®‡•á UPI ‡§ê‡§™ (PhonePe / Paytm / GPay / BHIM) ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§ï‡§∞ "Scan QR" ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§ä‡§™‡§∞ ‡§µ‡§æ‡§≤‡§æ QR ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡•á‡§Ç.\n2) ‡§Ø‡§æ "Copy UPI" ‡§∏‡•á UPI ID ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á ‡§Ö‡§™‡§®‡•á UPI ‡§ê‡§™ ‡§Æ‡•á‡§Ç ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§ï‡•á ‡§™‡•á ‡§ï‡§∞‡•á‡§Ç.\n3) ‡§™‡•á ‡§π‡•ã‡§®‡•á ‡§™‡§∞ TXN screenshot Telegram ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç: ' + CONFIG.telegram);
    }

    // init
    document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('upiPhoneLink').href = buildUpiUri(null, "Payment to Guru");
      document.getElementById('showUpi').innerText = CONFIG.upi;
    });

    // stop camera when page hidden
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden) stopCameraScanner();
    });
  </script>
</body>
</html>
